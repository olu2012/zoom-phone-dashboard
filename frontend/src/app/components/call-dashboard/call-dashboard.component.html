<div class="dashboard-container" [class.theme-tank]="currentTheme === 'tank'" [class.theme-roc]="currentTheme === 'roc'">
  <div class="header">
    <div class="header-logos">
      <img *ngFor="let logo of displayLogos" [src]="logo.src" [alt]="logo.alt" class="header-logo">
    </div>
    <div class="controls">
      <!-- Date Range Selector -->
       <!--Date removed


      <select class="date-range-filter" [(ngModel)]="selectedDateRange" (ngModelChange)="onDateRangeChange()" [disabled]="loading">
        <option value="today">Today</option>
      </select>
      -->

      <!-- Site Selector -->
      <select class="site-filter" [(ngModel)]="selectedSite" (ngModelChange)="onSiteChange()" [disabled]="loading">
        <option value="">All Sites</option>
        <option *ngFor="let site of sites" [value]="site.name">
          {{ site.name }}
        </option>
      </select>
      
    </div>
  </div>

  <div *ngIf="error" class="error-message">
    {{ error }}
  </div>

  <div class="info-bar">
    <div *ngIf="dateRange" class="date-range">
      üìÖ {{ dateRange.from }} to {{ dateRange.to }}
      (Refreshed: {{ lastRefreshedTime }})
    </div>
    <div class="site-info">
      üìç {{ currentSite }}
    </div>
  </div>

  <div class="table-container" #scrollContainer
       (mouseenter)="pauseScroll()"
       (mouseleave)="resumeScroll()">
    <table class="call-stats-table">
      <thead>
        <tr class="table-header">
          <th>Name</th>
          <th>Total Calls</th>
          <th>Outbound</th>
          <th>Total Call Time</th>
          <th>Total Call Time (Out)</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngIf="loading">
          <td colspan="5" class="loading-cell">Loading call statistics...</td>
        </tr>
        <tr *ngIf="!loading && filteredCallStats.length === 0">
          <td colspan="5" class="no-data-cell">No call data available</td>
        </tr>
        <tr *ngFor="let stat of filteredCallStats" 
            [class.three-hours-reached]="hasReachedThreeHours(stat.totalOutboundCallTimeSeconds)">
          <td class="user-cell">{{ stat.user }}</td>
          <td>{{ stat.totalCalls }}</td>
          <td>{{ stat.outbound }}</td>
          <td>{{ stat.totalCallTime }}</td>
          <td class="outbound-time-cell">{{ stat.totalOutboundCallTime }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>